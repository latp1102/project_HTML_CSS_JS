<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quản lý môn học</title>
    <link rel="stylesheet" href="./style.css" />
    <style>
      .container {
        padding: 20px;
      }

      .search-container {
        margin-bottom: 10px;
      }

      #subjectTable {
        width: 100%;
        border-collapse: collapse;
      }

      #subjectTable th,
      #subjectTable td {
        padding: 8px;
        border: 1px solid #ddd;
        text-align: left;
      }

      .pagination {
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="search-container">
        <input
          type="text"
          id="searchInput"
          placeholder="Tìm kiếm tên môn học..."
        />
        <button id="searchButton">Tìm kiếm</button>
      </div>
      <table border="1" class="category-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Tên môn học <img src="../assets/public/icons/icon_16.png" alt=""></th>
                <th>Trạng thái</th>
                <th colspan="2">Chức năng</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>Lập trình C</td>
                <td>
                    <div class="status status-active">
                        <img src="../assets/public/icons/icon_19.png" alt="">
                        <span>Đang hoạt động</span>
                    </div>
                </td>
                <td class="all">
                    <img class="delete-button" src="../assets/public/icons/icon_14.png" alt="">
                    <img class="edit-button" src="../assets/public/icons/icon_15.png" alt="">
                </td>
            </tr>
            <tr>
                <td>2</td>
                <td>Lập trình Frontend với ReactJS</td>
                <td>
                    <div class="status status-inactive">
                        <img src="../assets/public/icons/icon_20.png" alt="">
                        <span>Ngừng hoạt động</span>
                    </div>
                </td>
                <td class="all">
                    <img class="delete-button" src="../assets/public/icons/icon_14.png" alt="">
                    <img class="edit-button" src="../assets/public/icons/icon_15.png" alt="">
                </td>
            </tr>
            <tr>
                <td>3</td>
                <td>Lập trình Backend với Spring Boot</td>
                <td>
                    <div class="status status-active">
                        <img src="../assets/public/icons/icon_19.png" alt="">
                        <span>Đang hoạt động</span>
                    </div>
                </td>
                <td class="all">
                    <img class="delete-button" src="../assets/public/icons/icon_14.png" alt="">
                    <img class="edit-button" src="../assets/public/icons/icon_15.png" alt="">
                </td>
                
            </tr>
            <tr>
                <td>4</td>
                <td>Lập trình Frontend với VueJS</td>
                <td>
                    <div class="status status-inactive">
                        <img src="../assets/public/icons/icon_19.png" alt="">
                        <span>Ngừng hoạt động</span>
                    </div>
                </td>
                <td class="all">
                    <img class="delete-button" src="../assets/public/icons/icon_14.png" alt="">
                    <img class="edit-button" src="../assets/public/icons/icon_15.png" alt="">
                </td>
                
            </tr>
            <tr>
                <td>5</td>
                <td>Cấu trúc dữ liệu và giải thuật</td>
                <td>
                    <div class="status status-inactive">
                        <img src="../assets/public/icons/icon_19.png" alt="">
                        <span>Ngừng hoạt động</span>
                    </div>
                </td>
                <td class="all">
                    <img class="delete-button" src="../assets/public/icons/icon_14.png" alt="">
                    <img class="edit-button" src="../assets/public/icons/icon_15.png" alt="">
                </td>
                
            </tr>
            <tr>
                <td>6</td>
                <td>Phân tích và thiết kế hệ thống</td>
                <td>
                    <div class="status status-inactive">
                        <img src="../assets/public/icons/icon_19.png" alt="">
                        <span>Ngừng hoạt động</span>
                    </div>
                </td>
                <td class="all">
                    <img class="delete-button" src="../assets/public/icons/icon_14.png" alt="">
                    <img class="edit-button" src="../assets/public/icons/icon_15.png" alt="">
                </td>
            </tr>
            <tr>
                <td>7</td>
                <td>Toán cao cấp</td>
                <td>
                    <div class="status status-active">
                        <img src="../assets/public/icons/icon_19.png" alt="">
                        <span>Đang hoạt động</span>
                    </div>
                </td>
                <td class="all">
                    <img class="delete-button" src="../assets/public/icons/icon_14.png" alt="">
                    <img class="edit-button" src="../assets/public/icons/icon_15.png" alt="">
                </td>
            </tr>
            <tr>
                <td>8</td>
                <td>Tiếng Anh chuyên ngành</td>
                <td>
                    <div class="status status-inactive">
                        <img src="../assets/public/icons/icon_19.png" alt="">
                        <span>Ngừng hoạt động</span>
                      </div>
                    </td>
                    <td class="all">
                  <img class="delete-button" src="../assets/public/icons/icon_14.png" alt="">
                  <img class="edit-button" src="../assets/public/icons/icon_15.png" alt="">
                </td>
            </tr>
        </tbody>
    </table>
      <!-- <table id="subjectTable">
        <thead>
          <tr>
            <th data-sort="id">ID</th>
            <th data-sort="name">Tên môn học</th>
            <th data-sort="status">Trạng thái</th>
          </tr>
        </thead>
        <tbody id="subjectTableBody"></tbody>
      </table> -->
      <div class="pagination">
        <button id="prevPage">Trang trước</button>
        <span id="currentPage">1</span>/<span id="totalPages">1</span>
        <button id="nextPage">Trang sau</button>
      </div>
    </div>
    <script src="./script.js">
              const searchInput = document.getElementById("searchInput");
      const searchButton = document.getElementById("searchButton");
      const subjectTableBody = document.getElementById("subjectTableBody");
      const prevPageButton = document.getElementById("prevPage");
      const nextPageButton = document.getElementById("nextPage");
      const currentPageSpan = document.getElementById("currentPage");
      const totalPagesSpan = document.getElementById("totalPages");

      let subjects = [
          { id: 1, name: "Lập trình C", status: "Đang hoạt động" },
          { id: 2, name: "Lập trình Front-end với ReactJS", status: "Ngừng hoạt động" },
          { id: 3, name: "Lập trình Back-end với Spring Boot", status: "Đang hoạt động" },
          { id: 4, name: "Lập trình Front-end với VueJS", status: "Ngừng hoạt động" },
          { id: 5, name: "Cấu trúc dữ liệu và giải thuật", status: "Ngừng hoạt động" },
          { id: 6, name: "Phân tích và thiết kế hệ thống", status: "Ngừng hoạt động" },
          { id: 7, name: "Toán cao cấp", status: "Đang hoạt động" },
          { id: 8, name: "Tiếng Anh chuyên ngành", status: "Ngừng hoạt động" }
      ];

      let currentPage = 1;
      const subjectsPerPage = 3;
      let sortColumn = "id";
      let sortOrder = "asc";

      function displaySubjects() {
          subjectTableBody.innerHTML = "";
          const startIndex = (currentPage - 1) * subjectsPerPage;
          const endIndex = startIndex + subjectsPerPage;
          const displayedSubjects = subjects.slice(startIndex, endIndex);

          displayedSubjects.forEach(subject => {
              const row = document.createElement("tr");
              row.innerHTML = `
                  <td>${subject.id}</td>
                  <td>${subject.name}</td>
                  <td>${subject.status}</td>
              `;
              subjectTableBody.appendChild(row);
          });

          currentPageSpan.textContent = currentPage;
          totalPagesSpan.textContent = Math.ceil(subjects.length / subjectsPerPage);
      }

      function filterSubjects() {
          const searchTerm = searchInput.value.toLowerCase();
          subjects = subjects.filter(subject => subject.name.toLowerCase().includes(searchTerm));
          currentPage = 1;
          displaySubjects();
      }

      function sortSubjects(column) {
          if (sortColumn === column) {
              sortOrder = sortOrder === "asc" ? "desc" : "asc";
          } else {
              sortColumn = column;
              sortOrder = "asc";
          }

          subjects.sort((a, b) => {
              const valueA = a[column].toLowerCase();
              const valueB = b[column].toLowerCase();
              if (valueA < valueB) {
                  return sortOrder === "asc" ? -1 : 1;
              }
              if (valueA > valueB) {
                  return sortOrder === "asc" ? 1 : -1;
              }
              return 0;
          });

          displaySubjects();
      }

      searchButton.addEventListener("click", filterSubjects);
      prevPageButton.addEventListener("click", () => {
          if (currentPage > 1) {
              currentPage--;
              displaySubjects();
          }
      });
      nextPageButton.addEventListener("click", () => {
          if (currentPage < Math.ceil(subjects.length / subjectsPerPage)) {
              currentPage++;
              displaySubjects();
          }
      });

      document.querySelectorAll("#subjectTable th").forEach(header => {
          header.addEventListener("click", () => {
              sortSubjects(header.dataset.sort);
          });
      });

      displaySubjects();
    </script>
  </body>
</html>
